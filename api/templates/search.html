<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <title>News Search Engine</title>
    <style type="text/css">
        * {
            margin: 0;
        }
        html, body {
            height: 100%;
        }
        .wrapper {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0 auto -25px;
        }

        .footer, .push {
            height: 25px;
        }

        table.gridtable {
            font-family: verdana, arial, sans-serif;
            font-size: 11px;
            color: #333333;
            border-width: 1px;
            border-color: #666666;
            border-collapse: collapse;
            margin: 5px auto;
        }

        table.gridtable th {
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #666666;
            background-color: #dedede;
        }

        table.gridtable td {
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #666666;
            background-color: #ffffff;
        }

        .middle {
            text-align: center;
            margin: 0 auto;
            width: 1200px;
            height: auto;
        }

        .center {
            text-align: left;
            margin: 0 auto;
            width: 850px;
            height: auto;

        }

        .info {
            font-size: 12px;
            text-align: center;
            line-height: 20px;
            padding: 40px;
        }

        .info a {
            text-align: left;
            margin: 0 10px;
            text-decoration: none;
            color: green;
        }
        .title-init {
            padding: 120px 0 30px;
        }

        .searchText {
            width: 690px;
            height: 35px;
            line-height: 35px;
            font-size: 18px;
            padding: 5px 9px;
        }

        .searchText:hover {
            border-width: 1px;
            border-color: #a0a0a0 #b9b9b9 #b9b9b9 #b9b9b9 !important;
        }

        .searchBtn {
            width: 100px;
            height: 35px;
            line-height: 27px;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#f5f5f5), to(#f1f1f1));
            background-image: -webkit-linear-gradient(top, #f5f5f5, #f1f1f1);
            -webkit-border-radius: 2px;
            -webkit-user-select: none;
            background-color: #f2f2f2;
            border: 1px solid #f2f2f2;
            border-radius: 2px;
            color: #757575;
            cursor: default;
            font-family: arial, sans-serif;
            font-size: 13px;
            font-weight: bold;
            margin: 11px 4px;
            min-width: 54px;
            padding: 0 16px;
            text-align: center;
        }

        .searchBtn:hover {
            background-image: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#f1f1f1));
            background-image: -webkit-linear-gradient(top, #f8f8f8, #f1f1f1);
            -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
            background-color: #f8f8f8;
            background-image: linear-gradient(top, #f8f8f8, #f1f1f1);
            background-image: -o-linear-gradient(top, #f8f8f8, #f1f1f1);
            border: 1px solid #c6c6c6;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
            color: #222;
        }

        .copyright {
            color: #666;
            text-align: center;
        }

        .queryForm {
            background-color: #f1f1f1;
            border-bottom: 1px solid #666;
            border-color: #e5e5e5;
            padding: 0 20px;
        }

        .result-item {
            padding: 10px 10px 10px 40px;
        }

        #tads a, #tadsb a, #res a, #rhs a, #taw a {
            text-decoration: none;
        }

        a:link {
            cursor: pointer;
        }

        a:link, #prs a:visited, #prs a:active {
            color: #353535;
        }

        .cite {
            color: #006621;
            font-style: normal;
            font-size: small;
            line-height: 18px;
        }

        .item-url {
            text-decoration: none;
        }

        .item-content {
            color: #545454;
            font-size: small;
            line-height: 16px;
        }

        #resultStats {
            line-height: 43px;
            -webkit-transition: all 220ms ease-in-out;
            color: #808080;
            padding: 0 8px 0 16px;
            font-size: small;
        }

        .copyright {
            color: #666;
            text-align: center;
        }

        .middle-search {
            text-align: center;
            margin: 0 auto;
            height: auto;
        }
        p{
            margin:0px;
            font-family:Arial;
        }
        .title{
            padding-bottom:0px;
            font-size:26px;
            color : #2910ab
        }
        p.content{
            padding-top:3px;
            font-size:13px;
            line-height:18px;
        }
        p.link{
            font-size:13px;
            padding-bottom:25px;
            color:#008000;
        }


        * {
            box-sizing: border-box;
        }
        a {
            text-decoration: none;
            color: #379937;
        }
        body {
            margin: 20px;
        }
        .dropdown {
            position: relative;
            font-size: 14px;
            color: #333;
        }
        .dropdown .dropdown-list {
            padding: 12px;
            background: #fff;
            position: absolute;
            top: 30px;
            left: 2px;
            right: 2px;
            box-shadow: 0 1px 2px 1px rgba(0, 0, 0, 0.15);
            transform-origin: 50% 0;
            transform: scale(1, 0);
            transition: transform .15s ease-in-out .15s;
            max-height: 66vh;
            overflow-y: scroll;
        }
        .dropdown .dropdown-option {
            display: block;
            padding: 8px 12px;
            opacity: 0;
            transition: opacity .15s ease-in-out;
        }
        .dropdown .dropdown-label {
            display: block;
            height: 20px;
            background: #fff;
            border: 1px solid #ccc;
            padding: 3px 3px;
            line-height: 1;
            cursor: pointer;
        }
        .dropdown .dropdown-label:before {
            content: '▼';
            float: right;
        }
        .dropdown.on .dropdown-list {
            transform: scale(1, 1);
            transition-delay: 0s;
        }
        .dropdown.on .dropdown-list .dropdown-option {
            opacity: 1;
            transition-delay: .2s;
        }
        .dropdown.on .dropdown-label:before {
            content: '▲';
        }
        .dropdown [type="checkbox"] {
            position: relative;
            top: -1px;
            margin-right: 4px;
        }

    </style>
</head>
<body>
    <div id="container" class="wrapper">
        <div id="header" class="middle">
            <h1 class="title-init">News Search</h1>
            <form name="search" action="/search/" method="POST">
                <div id="searchbox" class="center">
                    {% if key %}
                        <table style="width:100%;border:none;">
                            <tr>
                                <td><input type="text" name="key_word" value={{key}} class="searchText"/></td>
                                <td><input type="submit" value="search" class="searchBtn"/></td>
                            </tr>
                        </table>
                     {% else %}
                        <table style="width:100%;border:none;">
                            <tr>
                                <td><input type="text" name="key_word" class="searchText"/></td>
                                <td><input type="submit" value="search" class="searchBtn"/></td>
                            </tr>
                        </table>
                    {% endif %}
                </div>
                <div>
                    <div class="dropdown" style="width:40px; height:20px;float:left;"> source:</div>
                    <div class="dropdown" data-control="checkbox-dropdown" style="width:180px; height:20px;float:left;margin-left:10px;">

                        <label class="dropdown-label">Source select</label>
                            <div class="dropdown-list">
                                <a href="#" data-toggle="check-all" class="dropdown-option">Check All</a>

                                <label class="dropdown-option">
                                    <input {{source[0]}} type="checkbox" name="foxnews" value="foxnews" /> foxnews
                                </label>
                                <label class="dropdown-option">
                                    <input {{source[1]}} type="checkbox" name="apnews" value="apnews" /> apnews
                                </label>
                                <label class="dropdown-option">
                                    <input {{source[2]}} type="checkbox" name="chinadaily" value="chinadaily" /> chinadaily
                                </label>
                                <label class="dropdown-option">
                                    <input {{source[3]}} type="checkbox" name="usatoday" value="usatoday" /> usatoday
                                </label>
                                <label class="dropdown-option">
                                    <input {{source[4]}} type="checkbox" name="globaltimes" value="globaltimes" /> globaltimes
                                </label>

                            </div>
                    </div>
                    <div class="dropdown" style="float:left;margin-left:10px;">
                    start time：<input id="start_time" type="date" name="start_time" value={{start_time}} />
                    </div>
                    <div class="dropdown" style="float:left;margin-left:10px;">
                    end time：<input id="end_time"type="date" name="end_time" value={{end_time}} />
                    </div>

                    <div class="dropdown" style="width:40px; height:20px;float:left;margin-left:10px;"> class:</div>
                    <div class="dropdown" data-control="checkbox-dropdown" style="width:220px; height:20px;float:left;margin-left:10px;">
                        <label class="dropdown-label">Class select</label>
                            <div class="dropdown-list">
                                <a href="#" data-toggle="check-all" class="dropdown-option">Check All</a>
                                <label class="dropdown-option">
                                    <input {{classification[0]}} type="checkbox" name="OTHERS" value="OTHERS" /> OTHERS
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[1]}} type="checkbox" name="CRIME" value="CRIME" /> CRIME
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[2]}} type="checkbox" name="ENTERTAINMENT" value="ENTERTAINMENT" /> ENTERTAINMENT
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[3]}} type="checkbox" name="POLITICS" value="POLITICS" /> POLITICS
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[4]}} type="checkbox" name="SPORTS" value="SPORTS" /> SPORTS
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[5]}} type="checkbox" name="BUSINESS" value="BUSINESS" /> BUSINESS
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[6]}} type="checkbox" name="TRAVEL" value="TRAVEL" /> TRAVEL
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[7]}} type="checkbox" name="WELLNESS" value="WELLNESS" /> WELLNESS
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[8]}} type="checkbox" name="FOOD & DRINK" value="FOOD & DRINK" /> FOOD & DRINK
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[9]}} type="checkbox" name="SCIENCE & TECH" value="SCIENCE & TECH" /> SCIENCE & TECH
                                </label>
                                <label class="dropdown-option">
                                    <input {{classification[10]}} type="checkbox" name="ARTS & CULTURE" value="ARTS & CULTURE" /> ARTS & CULTURE
                                </label>

                            </div>
                    </div>

                    <div class="dropdown" style="float:left;margin-left:10px;">
                    search type：
                        <select id="searchtype" name="searchtype" required="" >
                            <option value ="boolean search" {{search_type[0]}}>boolean search</option>
                            <option value ="ranked search" {{search_type[1]}}>ranked search</option>
                        </select>
                    </div>

                </div>
                <br>


            </form>
        </div>
        <br>
        <hr/>
        <br>
        <div id="results" class="center">
            {% block high_search%}
            {% endblock %}
            {% if error%}
                {% for doc in docs%}
                    <div class=".result-item" data-hveid="27">
<!--                        <h3 style="color:#2910ab"><a href="/search/{{doc.id}}/" target="_blank" class="item-url"> {{doc.title}}</a></h3>-->
                        <p class="title" style="color:#2440b3"><a href="/search/{{doc.id}}/" target="_blank">{{doc.title}}</a></p>
                        <p style="color:#545454">date:{{doc.date}} &nbsp; source:{{doc.source}} &nbsp; class:{{doc.class}}<br/></p>
                        <div>
                            <p class="p.content"> {{ doc.snippet }}</p>
                        </div>

                        <p style="color:#0e8d54"> <a href="{{ doc.url }}" style="white-space:nowrap" target="_blank" >{{ doc.url }}</a></p>
                    </div>
                <br/>
                {% endfor %}
            {% block next %}
            <ul>
                {% for i in page %}
                    <a href="/search/page/{{i}}/">{{i}}</a>&nbsp;
                {% endfor %}
            </ul>
            {% endblock %}
            {% else %}
                <p>对不起，没有您搜索的网页！</p>
            {% endif %}
        </div>
    </div>
</body>
	<script type="text/javascript">
        (function($) {
            var CheckboxDropdown = function(el) {
                var _this = this;
                this.isOpen = false;
                this.areAllChecked = false;
                this.$el = $(el);
                this.$label = this.$el.find('.dropdown-label');
                this.$checkAll = this.$el.find('[data-toggle="check-all"]').first();
                this.$inputs = this.$el.find('[type="checkbox"]');

                this.onCheckBox();

                this.$label.on('click', function(e) {
                    e.preventDefault();
                    _this.toggleOpen();
                });

                this.$checkAll.on('click', function(e) {
                    e.preventDefault();
                    _this.onCheckAll();
                });

                this.$inputs.on('change', function(e) {
                    _this.onCheckBox();
                });
            };

            CheckboxDropdown.prototype.onCheckBox = function() {
                this.updateStatus();
            };

            CheckboxDropdown.prototype.updateStatus = function() {
                var checked = this.$el.find(':checked');

                this.areAllChecked = false;
                this.$checkAll.html('Check All');

                if (checked.length <= 0) {
                    this.$label.html('Source Select');
                } else if (checked.length === 1) {
                    this.$label.html(checked.parent('label').text());
                } else if (checked.length === this.$inputs.length) {
                    this.$label.html('All Selected');
                    this.areAllChecked = true;
                    this.$checkAll.html('Uncheck All');
                } else {
                    this.$label.html(checked.length + ' Selected');
                }
            };

            CheckboxDropdown.prototype.onCheckAll = function(checkAll) {
                if (!this.areAllChecked || checkAll) {
                    this.areAllChecked = true;
                    this.$checkAll.html('Uncheck All');
                    this.$inputs.prop('checked', true);
                } else {
                    this.areAllChecked = false;
                    this.$checkAll.html('Check All');
                    this.$inputs.prop('checked', false);
                }

                this.updateStatus();
            };

            CheckboxDropdown.prototype.toggleOpen = function(forceOpen) {
                var _this = this;

                if (!this.isOpen || forceOpen) {
                    this.isOpen = true;
                    this.$el.addClass('on');
                    $(document).on('click', function(e) {
                        if (!$(e.target).closest('[data-control]').length) {
                            _this.toggleOpen();
                        }
                    });
                } else {
                    this.isOpen = false;
                    this.$el.removeClass('on');
                    $(document).off('click');
                }
            };

            var checkboxesDropdowns = document.querySelectorAll('[data-control="checkbox-dropdown"]');
            for (var i = 0, length = checkboxesDropdowns.length; i < length; i++) {
                new CheckboxDropdown(checkboxesDropdowns[i]);
            }
        })(jQuery);
	</script>


</html>